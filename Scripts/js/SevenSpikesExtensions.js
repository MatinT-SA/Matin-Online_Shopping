/*
* Copyright 2015 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

function initResponsiveTheme(e, t) { appSettings = null === t || "undefined" == typeof t ? { isEnabled: !1 } : t, void 0 != appSettings.selectors && (null == appSettings.selectors.headerLinksWrapperMobileInsertAfter && (appSettings.selectors.headerLinksWrapperMobileInsertAfter = ".header"), null == appSettings.selectors.headerLinksWrapperDesktopPrependTo && (appSettings.selectors.headerLinksWrapperDesktopPrependTo = ".header")), breakPointWidth = e.themeBreakpoint; var s = !1; "true" == $("#isRtlEnabled").val() && (s = !0); var n = $.getSpikesViewPort().width, i = function (t) { var i = $.getSpikesViewPort().width; if (appSettings.isEnabled && t && appSettings.doesDesktopHeaderMenuStick && $(appSettings.selectors.headerMenu).wrap('<div id="headerMenuParent"></div>'), t || i > breakPointWidth && breakPointWidth >= n || breakPointWidth >= i && n > breakPointWidth) { var a = ".plus-button"; appSettings.isEnabled && null != appSettings.selectors.sublistButtonOpenerSelector && (a = appSettings.selectors.sublistButtonOpenerSelector), menu_prepareTopMenu(i, a), addMobileClassIfEnabled(e.shouldAddClassForMobile), toggleSideBlocks(t, appSettings), e.hasSideBanners && attachDetachSideBanners(i, breakPointWidth), 1 == e.doesBackgroundChange && menu_setMenuBackground(e.bgSelector, e.bgInitialColor, e.red, e.green, e.blue, e.alpha, i), 1 == e.doesPaddingChange && menu_setMenuPaddings(e.paddingSelector, e.paddingValue, 1, i, s), appSettings.isEnabled && (onWidthBreak(appSettings.selectors, appSettings.isSearchBoxDetachable, appSettings.isHeaderLinksWrapperDetachable, i, t), 1 == appSettings.doesSublistHasIndent && initSublistIndent(appSettings.selectors.headerMenu, appSettings.selectors.withSubcategories)) } n = i }; i(!0), $.addSpikesWindowEvent("resize", function () { i(!1) }), $.addSpikesWindowEvent("orientationchange", function () { i(!1) }), appSettings.isEnabled && ((appSettings.hasStickyNav || appSettings.displayGoToTop || appSettings.doesDesktopHeaderMenuStick) && (null == appSettings.selectors.headerMenuDesktopStickElement && (appSettings.selectors.headerMenuDesktopStickElement = appSettings.selectors.headerMenu), null == appSettings.selectors.headerMenuDesktopStickParentElement && (appSettings.selectors.headerMenuDesktopStickParentElement = "#headerMenuParent"), windowScrollEvents(appSettings.doesDesktopHeaderMenuStick, appSettings.hasStickyNav, appSettings.displayGoToTop, appSettings.selectors.navWrapper, appSettings.selectors.navWrapperParent, appSettings.selectors.headerMenuDesktopStickElement, appSettings.selectors.headerMenuDesktopStickParentElement)), addDetachableClickEvents(appSettings.selectors, appSettings.isSearchBoxDetachable, appSettings.isHeaderLinksWrapperDetachable), 1 == appSettings.doesScrollAfterFiltration && $(document).on("nopAjaxFiltersFiltrationCompleteEvent", function () { $.getSpikesViewPort().width <= breakPointWidth && ($(appSettings.selectors.overlayOffCanvas).triggerHandler("click"), setTimeout(function () { $(appSettings.selectors.overlayOffCanvas).hide() }, 450)) })), addSideBlocksClickEvents(), 0 == $(".nopAjaxFilters7Spikes .block").length && $(".responsive-nav-wrapper .filters-button").remove(), (null == appSettings.DisableFootable || 0 == appSettings.DisableFootable) && ("function" == typeof $("body").footable && $(".private-messages-page .data-table ,.order-summary-content .cart, .wishlist-page .cart, .downloadable-products-page .data-table, .return-request-page .data-table, .order-details-page .data-table, .compare-products-table-mobile, .reward-points-history .data-table").footable(), $(".checkout-page").length > 0 && $(document).ajaxSuccess(function () { $(".order-summary-content .cart").length > 0 && $(".order-summary-content .cart").footable() })) } function attachDetachSideBanners(e, t) { if (t > e) { var s = $(".leftside-3 .slider-wrapper, .rightside-3 .slider-wrapper, .side-2 .slider-wrapper").detach(); $(".master-wrapper-main").append('<div class="mobile-banners"></div>'), $(".mobile-banners").append(s) } else $(".mobile-banners").detach() } function menu_setMenuBackground(e, t, s, n, i, a, o) { var r, l = "rgba("; if (o > breakPointWidth) l = ""; else { try { r = t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(0|1|0\.\d+))?\)$/), delete r[0] } catch (d) { return } if (l = l.concat(validateColorValue(parseInt(r[1]), s) + ","), l = l.concat(validateColorValue(parseInt(r[2]), n) + ","), l = l.concat(validateColorValue(parseInt(r[3]), i) + ","), null != r[4]) { r[4] = parseFloat(r[4]) + a; var c = parseFloat(r[4]); c > 1 ? c = 1 : 0 > c && (c = 0), l = l.concat(c) } l = l.concat(")") } $(e).css("background-color", l); var p = $(e).children("li").children("ul"); p.length > 0 && menu_setMenuBackground(p, l, s, n, i, a, o) } function validateColorValue(e, t) { var s = parseInt(e) + t; return 0 > s ? s = 0 : s > 255 && (s = 255), s } function toggleSideBlocks(e, t) { $(".block").each(function () { $.getSpikesViewPort().width > breakPointWidth ? e || (0 == t.isEnabled ? ($(this).children().eq(1).show(), $(this).children().eq(0).children("a.toggleControl").removeClass("closed")) : $(this).children(".listbox").eq(0).show(), $(this).find(".jcarousel-container-vertical").show()) : (0 == t.isEnabled ? ($(this).children().eq(1).hide(), $(this).children().eq(0).children("a.toggleControl").addClass("closed")) : $(this).children(".listbox").eq(0).hide(), $(this).find(".jcarousel-container-vertical").hide()) }) } function addMobileClassIfEnabled(e) { e && $.isMobile() && $(".product-grid .item-box").addClass("mobile-box"), $(document).on("nopAjaxFiltersFiltrationCompleteEvent", function () { e && $.isMobile() && $(".product-grid .item-box").addClass("mobile-box") }) } function addSideBlocksClickEvents() { $(".block .title").not($(".nopAjaxFilters7Spikes .block .title")).off("click").on("click", function () { if ($.getSpikesViewPort().width <= breakPointWidth) { var e = $(this).siblings(); e.slideToggle("slow", function () { e.css("overflow", "") }) } }), $(".nop-jcarousel.vertical-holder .carousel-title").on("click", function () { if ($.getSpikesViewPort().width <= breakPointWidth) { var e = $(this).siblings(); e.slideToggle("slow", function () { e.css("overflow", "") }) } }) } function AntiSpam(e, t) { window.location.href = "mailto:" + e + "@" + t } function initSublistIndent(e, t) { $(".mega-menu-responsive").length > 0 ? sublistIndent(".mega-menu-responsive > li > .sublist-wrap", t, 320, 1) : sublistIndent(e + " > ul > li > .sublist-wrap", t, 320, 1) } function menu_setMenuPaddings(e, t, s, n, i) { var a = $(e).children("a, span"); breakPointWidth >= n ? i ? (a.css("padding-left", ""), a.css("padding-right", t * s)) : (a.css("padding-left", t * s), a.css("padding-right", "")) : (a.css("padding-left", ""), a.css("padding-right", "")); var o = $(e).children("div").children("ul").children("li"); o.children("a").length > 0 && menu_setMenuPaddings(o, parseInt(t), ++s, n, i) } function windowScrollEvents(e, t, s, n, i, a, o) { t && stickyNav(n, i), e && stickyNav(a, o), $(window).on("scroll", function () { t && stickyNav(n, i), e && stickyNav(a, o), s && ($(window).scrollTop() > 100 ? $("#goToTop").show() : $("#goToTop").hide()), hasScrolled(n, i) }), s && $("#goToTop").on("click", function () { $("html,body").animate({ scrollTop: 0 }, 400) }) } function stickyNav(e, t) { var s = $(t), n = $(window).scrollTop(); n > 0 && n >= s.offset().top ? (s.css("height", s.height() + "px"), $(e).addClass("stick")) : (s.css("height", ""), $(e).removeClass("stick")) } function hasScrolled(e, t) { var s = $(e), n = s.filter(".stick"); if (0 == n.length || 0 == t.length) return void s.removeClass("nav-up"); var i = $(window).scrollTop(); return i <= $(t).offset().top ? void s.removeClass("nav-up") : (i > lastScrollTop ? n.addClass("nav-up") : n.removeClass("nav-up"), void (lastScrollTop = i)) } function onWidthBreak(e, t, s, n, i) { breakPointWidth >= n ? ($(e.headerMenu).add($(e.sublist)).add($(e.overlayOffCanvas)), $(e.filtersContainer).detach().insertAfter(e.headerMenu), t && $(e.searchBox).detach().insertAfter(e.navWrapperParent), s && $(e.headerLinksWrapper).detach().insertAfter(e.headerLinksWrapperMobileInsertAfter), $(e.shoppingCartLink).off("mouseenter.flyout-cart").off("mouseleave.flyout-cart"), $(".top-menu > li > .sublist-wrap").css("display", "")) : ($(e.headerMenu).css({ height: "", top: "" }), $(e.sublist).css({ height: "", top: "" }), $(e.filtersContainer).css("height", ""), i || $(e.filtersContainer).detach().prependTo(".side-2"), s && $(e.headerLinksWrapper).detach().prependTo(e.headerLinksWrapperDesktopPrependTo), t && $(e.searchBox).detach().insertAfter(e.searchBoxBefore), $(e.shoppingCartLink).on("mouseenter.flyout-cart", function (e) { var t = $(this).children(".flyout-cart"); (void 0 == t.attr("isSliding") || "false" == t.attr("isSliding")) && t.attr("isSliding", "true").slideDown(100, function () { $(this).css("overflow", ""), $(this).attr("isSliding", "false") }), e.preventDefault() }).on("mouseleave.flyout-cart", function (e) { $(this).children(".flyout-cart").attr("isSliding", "true").slideUp(100, function () { $(this).css("overflow", ""), $(this).attr("isSliding", "false") }), e.preventDefault() })) } function menu_prepareTopMenu(e, t) { (null == appSettings || "undefined" == typeof appSettings) && (appSettings = { isEnabled: !1 }); var s = ".top-menu li"; 0 == megaMenuSkipEventBinding && ($(".menu-title").click(function () { $(this).hasClass("close") ? $(this).removeClass("close") : $(this).addClass("close"), $(this).siblings(".top-menu, .mega-menu-responsive").slideToggle("fast", function () { $(this).css("overflow", "") }), appSettings.isEnabled && $(".header-menu, .sublist-wrap").perfectScrollbar({ swipePropagation: !1, wheelSpeed: 1, suppressScrollX: !0 }) }), $(t).on("click", function (e) { var t = $(this); e.stopPropagation(), t.hasClass("close") ? t.removeClass("close") : t.addClass("close"); var s = t.siblings(".sublist-wrap"); s.hasClass("active") ? s.removeClass("active") : appSettings.isEnabled ? t.parents().eq(2).animate({ scrollTop: 0 }, 180, function () { s.addClass("active") }) : s.addClass("active"), appSettings.isEnabled && t.parents().eq(2).perfectScrollbar("destroy") }), megaMenuSkipEventBinding = !0), e > breakPointWidth ? ($(".sublist-wrap.active").removeClass("active"), $(t + ".close").removeClass("close"), $(s).on("mouseenter", function () { $("a", $(this)).first().addClass("hover"), $(".sublist-wrap", $(this)).first().addClass("active") }).on("mouseleave", function () { $("a", $(this)).first().removeClass("hover"), $(".sublist-wrap", $(this)).first().removeClass("active") })) : ($(s).off("mouseenter mouseleave"), $(".sublist-wrap.active").removeClass("active"), $(t + ".close").removeClass("close")) } function sublistIndent(e, t, s, n) { var i = $(e); $.getSpikesViewPort().width <= breakPointWidth ? (i.css({ width: s - 7, "z-index": i.css("z-index") + n }), $("> .sublist > li > " + t, e).css("width", s - 57)) : (i.css({ width: "", "z-index": "" }), $("> .sublist > li > " + t, e).css("width", "")); var a = e + "> .sublist > li > .sublist-wrap"; $(a).length > 0 && sublistIndent(a, t, s - 7, n + 1) } function addDetachableClickEvents(e, t) { t && $(".search-wrap > span").click(function () { $(e.searchBox).addClass("open"), $(e.overlayOffCanvas).show(0).addClass("show"), $("html, body").addClass("scrollYRemove") }), $("#header-links-opener").on("click", function () { $(e.headerLinksWrapper).addClass("open"), $(e.overlayOffCanvas).show(0).addClass("show"), $("html, body").addClass("scrollYRemove") }), $(e.menuTitle).click(function () { onMenuTitleClick(e) }), $(e.closeMenu).click(function () { $(e.headerMenu).removeClass("open"), onOverlayClick(e), appSettings.isEnabled && $(".header-menu, .sublist-wrap").perfectScrollbar("destroy") }), $(e.overlayOffCanvas).click(function () { $(e.sublist).parent().removeClass("active").animate({ scrollTop: 0 }), $(e.headerMenu).add($(e.filtersContainer)).removeClass("open"), t && $(e.searchBox).removeClass("open"), $(e.headerLinksWrapper).removeClass("open"), onOverlayClick(e), appSettings.isEnabled && $(".header-menu, .sublist-wrap, .nopAjaxFilters7Spikes.open").perfectScrollbar("destroy") }), $(".sublist").on("click", ".back-button", function () { $(this).parent(".sublist").parent(".sublist-wrap").removeClass("active"), appSettings.isEnabled && $(this).parents().eq(4).perfectScrollbar({ swipePropagation: !1, wheelSpeed: 2, suppressScrollX: !0 }) }), $(e.filtersOpener).click(function () { $(e.filtersContainer).toggleClass("open"), $(e.movedElements).toggleClass("move-right"), $(e.overlayOffCanvas).show(0).addClass("show"), $("html, body").addClass("scrollYRemove"), appSettings.isEnabled && $(".nopAjaxFilters7Spikes.open").perfectScrollbar({ swipePropagation: !1, wheelSpeed: 1, suppressScrollX: !0 }) }), $('<div class="close-filters"><span>close</span></div>').insertBefore(".filtersPanel"), $(".close-filters").click(function () { $(e.filtersContainer).toggleClass("open"), $(e.movedElements).toggleClass("move-right"), $(e.overlayOffCanvas).removeClass("show").delay(e.overlayEffectDelay).hide(0), $("html, body").removeClass("scrollYRemove"), appSettings.isEnabled && $(".nopAjaxFilters7Spikes.open").perfectScrollbar("destroy") }) } function onMenuTitleClick(e) { $(e.headerMenu).addClass("open"), $(e.movedElements).addClass("move-right"), $(e.overlayOffCanvas).show(0).addClass("show"), $("html, body").addClass("scrollYRemove") } function onOverlayClick(e) { $(e.movedElements).removeClass("move-right"), $(e.overlayOffCanvas).removeClass("show").delay(e.overlayEffectDelay).hide(0), $("html, body").removeClass("scrollYRemove") } function isMobileDevice() { var e = { Android: function () { return navigator.userAgent.match(/Android/i) }, BlackBerry: function () { return navigator.userAgent.match(/BlackBerry/i) }, iOS: function () { return navigator.userAgent.match(/iPhone|iPad|iPod/i) }, Opera: function () { return navigator.userAgent.match(/Opera Mini/i) }, Windows: function () { return navigator.userAgent.match(/IEMobile/i) }, any: function () { return e.Android() || e.BlackBerry() || e.iOS() || e.Opera() || e.Windows() } }; return e.any() } var breakPointWidth = 980, megaMenuSkipEventBinding = !1, appSettings; !function () { "function" != typeof String.prototype.trim && (String.prototype.trim = function () { return this.replace(/^\s+|\s+$/g, "") }), "function" != typeof String.prototype.startsWith && (String.prototype.startsWith = function (e) { return 0 == this.indexOf(e) }) }(); var errorsCounter = 0; window.onerror = function (e, t, s) { if (!(null == document.body || errorsCounter > 10)) { var n = "URL: " + t + "§§MESSAGE: " + e + "§§ROW: " + s, i = document.createElement("input"); i.setAttribute("class", "javascriptErrorsElement"), i.setAttribute("type", "hidden"), i.setAttribute("value", n), document.body.appendChild(i), errorsCounter++ } }, window.onload = function () { $(".block").each(function () { $.getSpikesViewPort().width <= breakPointWidth && $(this).find(".jcarousel-container-vertical").hide() }), $.isMobile() && $(".mega-menu-responsive .labelForNextPlusButton").on("click", function () { $(this).next(".plus-button").click() }) }, $.extend({ getAttrValFromDom: function (e, t, s) { var n = $(e).attr(t); return (void 0 == n || "" == n) && (window.console && window.console.log("'" + t + "' was not found."), n = void 0 != s ? s : ""), n }, getHiddenValFromDom: function (e, t) { var s = $(e).val(); return (void 0 == s || "" == s) && (s = void 0 != t ? t : ""), s }, getUrlVars: function () { for (var e, t = [], s = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&"), n = 0; n < s.length; n++) e = s[n].split("="), t.push(e[0]), t[e[0]] = e[1]; return t }, getUrlVar: function (e) { return $.getUrlVars()[e] }, getSpikesViewPort: function () { var e = window, t = "inner"; "innerWidth" in window || (t = "client", e = document.documentElement || document.body); var s = { width: e[t + "Width"], height: e[t + "Height"] }; return s }, isMobile: function () { return isMobileDevice() }, addSpikesWindowEvent: function (e, t) { window.addEventListener ? window.addEventListener(e, t, !1) : window.attachEvent && window.attachEvent("on" + e, t) } }); var lastScrollTop = 0;
